(()=>{var t={216:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.makeBlockFractal=void 0;const a=s(r(175));function o(t,e){return t.length>1&&t[t.length-2].equals(e)}function u(t,e,r){o(t,r)?e.setAtOffset(t.splice(t.length-1,1)[0],!1):(t.push(r),e.setAtOffset(r,!0))}function c(t,e,r,n,i,s,c,h){const l=2*c.x,d=h.y-c.y;for(let f=2*c.y;f!==2*h.y;f+=d){const c=new a.Offset(l,f+d);if(o(n,c))i.setAtOffset(n.splice(n.length-1,1)[0],!1);else{if(s===t.length-2&&i.getAtOffset(c)){const t=n.findIndex((t=>t.equals(c)));for(const e of n.splice(0,t))i.setAtOffset(e,!1);u(n,i,c);break}if(e()<r){const t=2*Math.floor(2*e())-1,r=new a.Offset(l+t,f),s=new a.Offset(l+t,f+d);i.getAtOffset(s)||i.getAtOffset(r)&&!o(n,r)||(u(n,i,r),u(n,i,s))}u(n,i,c)}}}function h(t,e,r,n,i,s,c,h){const l=2*c.y,d=h.x-c.x;for(let f=2*c.x;f!==2*h.x;f+=d){const c=new a.Offset(f+d,l);if(o(n,c))i.setAtOffset(n.splice(n.length-1,1)[0],!1);else{if(s===t.length-2&&i.getAtOffset(c)){const t=n.findIndex((t=>t.equals(c)));for(const e of n.splice(0,t))i.setAtOffset(e,!1);u(n,i,c);break}if(e()<r){const t=2*Math.floor(2*e())-1,r=new a.Offset(f,l+t),s=new a.Offset(f+d,l+t);i.getAtOffset(s)||i.getAtOffset(r)&&!o(n,r)||(u(n,i,r),u(n,i,s))}u(n,i,c)}}}function l(t,e,r,n){const i=new Array,s=new a.Rectangle(2*r.westX-1,2*r.northY-1,2*r.width+2,2*r.height+2),o=new a.MaskRectangle(s);for(let r=0;r<e.length-1;r++){const s=e[r],l=e[r+1];0===r&&u(i,o,new a.Offset(2*s.x,2*s.y)),s.x===l.x?c(e,t,n,i,o,r,s,l):h(e,t,n,i,o,r,s,l)}return{points:i,bounds:s}}e.makeBlockFractal=function(t){let{random:e,shape:r,variation:n}=t;void 0===e&&(e=Math.random),void 0===r&&(r=new a.CardinalPath({x:-1,y:-1},[a.CardinalDirection.EAST,a.CardinalDirection.EAST,a.CardinalDirection.SOUTH,a.CardinalDirection.SOUTH,a.CardinalDirection.WEST,a.CardinalDirection.WEST,a.CardinalDirection.NORTH,a.CardinalDirection.NORTH])),void 0===n&&(n=.4);let i=new Array,s=r.getBounds();for(const t of r.offsets())i.push(new a.Offset(t.x,t.y));for(let r=0;r<t.iterations;r++)({points:i,bounds:s}=l(e,i,s,n));const o=new Array;for(let t=0;t<i.length-1;t++){const e=i[t],r=i[t+1];r.y===e.y-1?o.push(a.CardinalDirection.NORTH):r.x===e.x+1?o.push(a.CardinalDirection.EAST):r.y===e.y+1?o.push(a.CardinalDirection.SOUTH):r.x===e.x-1&&o.push(a.CardinalDirection.WEST)}return new a.CardinalPath(i[0],o)}},254:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RasterMask=e.CardinalPath=e.Offset=e.CardinalDirectionFlags=e.CardinalDirection=e.makeBlockFractal=void 0;var n=r(216);Object.defineProperty(e,"makeBlockFractal",{enumerable:!0,get:function(){return n.makeBlockFractal}});var i=r(175);Object.defineProperty(e,"CardinalDirection",{enumerable:!0,get:function(){return i.CardinalDirection}}),Object.defineProperty(e,"CardinalDirectionFlags",{enumerable:!0,get:function(){return i.CardinalDirectionFlags}}),Object.defineProperty(e,"Offset",{enumerable:!0,get:function(){return i.Offset}}),Object.defineProperty(e,"CardinalPath",{enumerable:!0,get:function(){return i.CardinalPath}}),Object.defineProperty(e,"RasterMask",{enumerable:!0,get:function(){return i.RasterMask}})},995:(t,e,r)=>{var n=r(417),i=r(371),s=r(576),a=r(794),o=r(191),u=r(723),c=r(820);c.alea=n,c.xor128=i,c.xorwow=s,c.xorshift7=a,c.xor4096=o,c.tychei=u,t.exports=c},417:function(t,e,r){var n;!function(t,i,s){function a(t){var e,r=this,n=(e=4022871197,function(t){t=String(t);for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});r.next=function(){var t=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(t),r.s0<0&&(r.s0+=1),r.s1-=n(t),r.s1<0&&(r.s1+=1),r.s2-=n(t),r.s2<0&&(r.s2+=1),n=null}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var r=new a(t),n=e&&e.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.alea=u}(0,t=r.nmd(t),r.amdD)},723:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,i=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}function o(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.tychei=u}(0,t=r.nmd(t),r.amdD)},371:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xor128=u}(0,t=r.nmd(t),r.amdD)},191:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this;e.next=function(){var t,r,n=e.w,i=e.X,s=e.i;return e.w=n=n+1640531527|0,r=i[s+34&127],t=i[s=s+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=i[s]=r^t,e.i=s,r+(n^n>>>16)|0},function(t,e){var r,n,i,s,a,o=[],u=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,u=Math.max(u,e.length)),i=0,s=-32;s<u;++s)e&&(n^=e.charCodeAt((s+32)%e.length)),0===s&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(a=a+1640531527|0,i=0==(r=o[127&s]^=n+a)?i+1:0);for(i>=128&&(o[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)n=o[i+34&127],r=o[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,o[i]=n^r;t.w=a,t.X=o,t.i=i}(e,t)}function o(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.X&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xor4096=u}(0,t=r.nmd(t),r.amdD)},794:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this;e.next=function(){var t,r,n=e.x,i=e.i;return t=n[i],r=(t^=t>>>7)^t<<24,r^=(t=n[i+1&7])^t>>>10,r^=(t=n[i+3&7])^t>>>3,r^=(t=n[i+4&7])^t<<7,t=n[i+7&7],r^=(t^=t<<13)^t<<9,n[i]=r,e.i=i+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function o(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.x&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xorshift7=u}(0,t=r.nmd(t),r.amdD)},576:function(t,e,r){var n;!function(t,i,s){function a(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var r=new a(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&o(n,r),i.state=function(){return o(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xorwow=u}(0,t=r.nmd(t),r.amdD)},820:function(t,e,r){var n;!function(i,s,a){var o,u=256,c=a.pow(u,6),h=a.pow(2,52),l=2*h,d=255;function f(t,e,r){var n=[],d=m(g((e=1==e?{entropy:!0}:e||{}).entropy?[t,T(s)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(u):(t=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(t)),T(t)}catch(t){var e=i.navigator,r=e&&e.plugins;return[+new Date,i,r,i.screen,T(s)]}}():t,3),n),f=new _(n),y=function(){for(var t=f.g(6),e=c,r=0;t<h;)t=(t+r)*u,e*=u,r=f.g(1);for(;t>=l;)t/=2,e/=2,r>>>=1;return(t+r)/e};return y.int32=function(){return 0|f.g(4)},y.quick=function(){return f.g(4)/4294967296},y.double=y,m(T(f.S),s),(e.pass||r||function(t,e,r,n){return n&&(n.S&&p(n,f),t.state=function(){return p(f,{})}),r?(a.random=t,e):t})(y,d,"global"in e?e.global:this==a,e.state)}function _(t){var e,r=t.length,n=this,i=0,s=n.i=n.j=0,a=n.S=[];for(r||(t=[r++]);i<u;)a[i]=i++;for(i=0;i<u;i++)a[i]=a[s=d&s+t[i%r]+(e=a[i])],a[s]=e;(n.g=function(t){for(var e,r=0,i=n.i,s=n.j,a=n.S;t--;)e=a[i=d&i+1],r=r*u+a[d&(a[i]=a[s=d&s+e])+(a[s]=e)];return n.i=i,n.j=s,r})(u)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(g(t[r],e-1))}catch(t){}return n.length?n:"string"==i?t:t+"\0"}function m(t,e){for(var r,n=t+"",i=0;i<n.length;)e[d&i]=d&(r^=19*e[d&i])+n.charCodeAt(i++);return T(e)}function T(t){return String.fromCharCode.apply(0,t)}if(m(a.random(),s),t.exports){t.exports=f;try{o=r(906)}catch(t){}}else void 0===(n=function(){return f}.call(e,r,e,t))||(t.exports=n)}("undefined"!=typeof self?self:this,[],Math)},586:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.axisAddCardinalTurn=e.axisFromNorthSouthTurn=e.axisFromCardinalDirection=e.axisOrthogonal=e.axisToString=e.AXES=e.Axis=void 0,function(t){t[t.NORTH_SOUTH=0]="NORTH_SOUTH",t[t.WEST_EAST=1]="WEST_EAST"}(r=e.Axis||(e.Axis={})),e.AXES=[r.NORTH_SOUTH,r.WEST_EAST];const n=["N-S","W-E"];e.axisToString=function(t){return n[t]},e.axisOrthogonal=function(t){return 1^t},e.axisFromCardinalDirection=function(t){return 1&t},e.axisFromNorthSouthTurn=function(t){return 1&t},e.axisAddCardinalTurn=function(t,e){return t+e&1}},450:(t,e)=>{"use strict";var r;function n(t){return 1<<t}Object.defineProperty(e,"__esModule",{value:!0}),e.cardinalDirectionFlagsFromCardinalDirection=e.cardinalDirectionFlagsRemoveCardinalDirection=e.cardinalDirectionFlagsSetCardinalDirection=e.cardinalDirectionFlagsHasCardinalDirection=e.cardinalDirectionFlagsToString=e.CardinalDirectionFlags=void 0,function(t){t[t.NONE=0]="NONE",t[t.NORTH=1]="NORTH",t[t.EAST=2]="EAST",t[t.SOUTH=4]="SOUTH",t[t.WEST=8]="WEST",t[t.ALL=15]="ALL"}(r=e.CardinalDirectionFlags||(e.CardinalDirectionFlags={})),e.cardinalDirectionFlagsToString=function(t){let e="[";return 0!=(t&r.NORTH)&&(e+="N"),0!=(t&r.EAST)&&(e+="E"),0!=(t&r.SOUTH)&&(e+="S"),0!=(t&r.WEST)&&(e+="W"),e+"]"},e.cardinalDirectionFlagsHasCardinalDirection=function(t,e){return 0!=(t&n(e))},e.cardinalDirectionFlagsSetCardinalDirection=function(t,e){return t|n(e)},e.cardinalDirectionFlagsRemoveCardinalDirection=function(t,e){return t&~n(e)},e.cardinalDirectionFlagsFromCardinalDirection=n},28:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.cardinalDirectionAddCardinalTurn=e.cardinalDirectionFromCardinalOrientation=e.cardinalDirectionFromNorthTurn=e.cardinalDirectionFromDirection=e.cardinalDirectionOpposite=e.cardinalDirectionToString=e.CARDINAL_DIRECTIONS=e.CardinalDirection=void 0,function(t){t[t.NORTH=0]="NORTH",t[t.EAST=1]="EAST",t[t.SOUTH=2]="SOUTH",t[t.WEST=3]="WEST"}(r=e.CardinalDirection||(e.CardinalDirection={})),e.CARDINAL_DIRECTIONS=[r.NORTH,r.EAST,r.SOUTH,r.WEST];const n=["N","E","S","W"];e.cardinalDirectionToString=function(t){return n[t]},e.cardinalDirectionOpposite=function(t){return t+2&3},e.cardinalDirectionFromDirection=function(t){return t>>1},e.cardinalDirectionFromNorthTurn=function(t){return t},e.cardinalDirectionFromCardinalOrientation=function(t){return t>>>1},e.cardinalDirectionAddCardinalTurn=function(t,e){return t+e&3}},534:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cardinalOrientationAddCardinalTurn=e.cardinalOrientationFromFlipAndCardinalDirection=e.cardinalOrientationReverse=e.cardinalOrientationFlip=e.cardinalOrientationToString=e.CARDINAL_ORIENTATIONS=e.CardinalOrientation=void 0;const n=r(586),i=r(598);var s;!function(t){t[t.HEADS_NORTH=0]="HEADS_NORTH",t[t.TAILS_NORTH=1]="TAILS_NORTH",t[t.HEADS_EAST=2]="HEADS_EAST",t[t.TAILS_EAST=3]="TAILS_EAST",t[t.HEADS_SOUTH=4]="HEADS_SOUTH",t[t.TAILS_SOUTH=5]="TAILS_SOUTH",t[t.HEADS_WEST=6]="HEADS_WEST",t[t.TAILS_WEST=7]="TAILS_WEST"}(s=e.CardinalOrientation||(e.CardinalOrientation={})),e.CARDINAL_ORIENTATIONS=[s.HEADS_NORTH,s.TAILS_NORTH,s.HEADS_EAST,s.TAILS_EAST,s.HEADS_SOUTH,s.TAILS_SOUTH,s.HEADS_WEST,s.TAILS_WEST];const a=["HN","TN","HE","TE","HS","TS","HW","TW"];e.cardinalOrientationToString=function(t){return a[t]},e.cardinalOrientationFlip=function(t,e){return e===n.Axis.NORTH_SOUTH?9-t&7:13-t&7},e.cardinalOrientationReverse=function(t){return t===s.HEADS_EAST?s.HEADS_WEST:t===s.HEADS_WEST?s.HEADS_EAST:t},e.cardinalOrientationFromFlipAndCardinalDirection=function(t,e){return 2*e+(t!==i.Flip.HEADS?1:0)},e.cardinalOrientationAddCardinalTurn=function(t,e){return t+2*e&7}},399:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.cardinalTurnAddCardinalTurn=e.cardinalTurnFromTurn=e.cardinalTurnFromCardinalDirections=e.cardinalTurnReverse=e.cardinalTurnToDegrees=e.cardinalTurnToString=e.CARDINAL_TURNS=e.CardinalTurn=void 0,function(t){t[t.NONE=0]="NONE",t[t.RIGHT=1]="RIGHT",t[t.AROUND=2]="AROUND",t[t.LEFT=3]="LEFT"}(r=e.CardinalTurn||(e.CardinalTurn={})),e.CARDINAL_TURNS=[r.NONE,r.RIGHT,r.AROUND,r.LEFT];const n=["T0","T+90","T180","T-90"];e.cardinalTurnToString=function(t){return n[t]},e.cardinalTurnToDegrees=function(t){return 90*t},e.cardinalTurnReverse=function(t){return 4-t&3},e.cardinalTurnFromCardinalDirections=function(t,e){return e-t&3},e.cardinalTurnFromTurn=function(t){return t>>1},e.cardinalTurnAddCardinalTurn=function(t,e){return t+e&3}},730:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.directionAddCardinalTurn=e.directionAddTurn=e.directionFromCardinalDirection=e.directionOpposite=e.directionIsCardinal=e.directionToString=e.DIRECTIONS=e.Direction=void 0,function(t){t[t.NORTH=0]="NORTH",t[t.NORTHEAST=1]="NORTHEAST",t[t.EAST=2]="EAST",t[t.SOUTHEAST=3]="SOUTHEAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTHWEST=5]="SOUTHWEST",t[t.WEST=6]="WEST",t[t.NORTHWEST=7]="NORTHWEST"}(r=e.Direction||(e.Direction={})),e.DIRECTIONS=[r.NORTH,r.NORTHEAST,r.EAST,r.SOUTHEAST,r.SOUTH,r.SOUTHWEST,r.WEST,r.NORTHWEST];const n=["N","NE","E","SE","S","SW","W","NW"];e.directionToString=function(t){return n[t]},e.directionIsCardinal=function(t){return 0==(1&t)},e.directionOpposite=function(t){return t+4&7},e.directionFromCardinalDirection=function(t){return t<<1},e.directionAddTurn=function(t,e){return t+e&7},e.directionAddCardinalTurn=function(t,e){return t+2*e&7}},598:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.flipFromCardinalOrientation=e.flipFromBoolean=e.flipOpposite=e.flipToString=e.FLIPS=e.Flip=void 0,function(t){t[t.HEADS=0]="HEADS",t[t.TAILS=1]="TAILS"}(r=e.Flip||(e.Flip={})),e.FLIPS=[r.HEADS,r.TAILS];const n=["H","T"];e.flipToString=function(t){return n[t]},e.flipOpposite=function(t){return 1^t},e.flipFromBoolean=function(t){return t?r.TAILS:r.HEADS},e.flipFromCardinalOrientation=function(t){return 1&t}},74:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(730),e),i(r(35),e),i(r(28),e),i(r(399),e),i(r(450),e),i(r(598),e),i(r(534),e),i(r(586),e)},35:(t,e)=>{"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.turnAddTurn=e.turnFromDirections=e.turnFromCardinalTurn=e.turnFromCardinalDirections=e.turnReverse=e.turnIsCardinal=e.turnToDegrees=e.turnToString=e.TURNS=e.Turn=void 0,function(t){t[t.NONE=0]="NONE",t[t.R_45=1]="R_45",t[t.R_90=2]="R_90",t[t.R_135=3]="R_135",t[t.T_180=4]="T_180",t[t.L_135=5]="L_135",t[t.L_90=6]="L_90",t[t.L_45=7]="L_45"}(r=e.Turn||(e.Turn={})),e.TURNS=[r.NONE,r.R_45,r.R_90,r.R_135,r.T_180,r.L_135,r.L_90,r.L_45];const n=["T0","T+45","T+90","T+135","T180","T-135","T-90","T-45"];e.turnToString=function(t){return n[t]},e.turnToDegrees=function(t){return 45*t},e.turnIsCardinal=function(t){return 0==(1&t)},e.turnReverse=function(t){return 8-t&7},e.turnFromCardinalDirections=function(t,e){return 2*(e-t)&7},e.turnFromCardinalTurn=function(t){return t<<1},e.turnFromDirections=function(t,e){return e-t&7},e.turnAddTurn=function(t,e){return t+e&7}},400:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CardinalPath=void 0;const n=r(74),i=r(317),s=r(82),a=r(64),o=new i.Offset;function u(t,e){t.push(e);let r=t.length-1;for(;r>0&&e<t[r-1];)t[r]=t[r-1],r--;t[r]=e}e.CardinalPath=class{constructor(t,e){this._start=new i.Offset,this._start.copyFrom(t),this._segments=e}toString(){return`${this._start.toString()}:${this._segments.map((t=>n.cardinalDirectionToString(t))).join("")}`}equals(t){return this._start.equals(t._start)&&this._segments.length===t._segments.length&&this._segments.every(((e,r)=>e===t._segments[r]))}get length(){return this._segments.length}getIsClosed(){o.copyFrom(this._start);for(const t of this._segments)o.addCardinalDirection(t);return this._start.equals(o)}*offsets(){let{x:t,y:e}=this._start;yield{x:t,y:e};for(const r of this._segments)o.setFromCardinalDirection(r),t+=o.x,e+=o.y,yield{x:t,y:e}}getBounds(){let t=this._start.y,e=t,r=this._start.x,i=r;o.copyFrom(this._start);for(const s of this._segments)switch(o.addCardinalDirection(s),s){case n.CardinalDirection.NORTH:t=Math.min(t,o.y);break;case n.CardinalDirection.EAST:i=Math.max(i,o.x);break;case n.CardinalDirection.SOUTH:e=Math.max(e,o.y);break;case n.CardinalDirection.WEST:r=Math.min(r,o.x);break;default:throw new Error(`bad direction ${s} in cardinal path`)}return new s.Rectangle(r,t,i-r+1,e-t+1)}getArea(){let t=0;o.copyFrom(this._start);for(const e of this._segments)switch(o.addCardinalDirection(e),e){case n.CardinalDirection.NORTH:t-=o.x;break;case n.CardinalDirection.SOUTH:t+=o.x}return Math.abs(t)}rasterize(t){const e=new Array;void 0===t&&(t=this.getBounds()),o.copyFrom(this._start);const{northY:r}=t,i=r+t.height-1;for(let t=r;t<i;t++)e.push([]);o.copyFrom(this._start);for(const t of this._segments)t===n.CardinalDirection.SOUTH&&u(e[o.y-r],o.x),o.addCardinalDirection(t),t===n.CardinalDirection.NORTH&&u(e[o.y-r],o.x);return new a.RasterMask({westX:t.westX,northY:t.northY,width:t.width-1,height:t.height-1},e)}}},876:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(317),e),i(r(154),e),i(r(82),e),i(r(971),e),i(r(630),e),i(r(64),e),i(r(400),e),i(r(457),e)},630:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MaskRectangle=void 0;const n=r(82),i=r(971);e.MaskRectangle=class{constructor(t,e=!1,r=!1){this._rect=new n.Rectangle,void 0!==t&&this._rect.copyFrom(t),this._mask=new i.Mask(t,e),this._outsideValue=r}toString(){return`${this._rect.northWest}/${this._outsideValue}\n${this._mask}`}equals(t){return this._rect.equals(t._rect)&&this._mask.equals(t._mask)&&this._outsideValue===t._outsideValue}get westX(){return this._rect.westX}get northY(){return this._rect.northY}get width(){return this._rect.width}get height(){return this._rect.height}get(t,e){return this._rect.contains(t,e)?this._mask.get(t-this.westX,e-this.northY):this._outsideValue}getAtIndex(t){return this._mask.getAtIndex(t)}getAtOffset(t){return this.get(t.x,t.y)}copyFrom(t){return this._rect.copyFrom(t._rect),this._mask.copyFrom(t._mask),this._outsideValue=t._outsideValue,this}set(t,e,r){return this._mask.set(t-this.westX,e-this.northY,r),this}setAtOffset(t,e){return this.set(t.x,t.y,e)}setAtIndex(t,e){return this._mask.setAtIndex(t,e),this}index(t,e){return this._mask.index(t-this.westX,e-this.northY)}*locations(){for(const t of this._mask.locations()){const e=t.x+this.westX,r=t.y+this.northY,{value:n}=t;yield{x:e,y:r,value:n}}}*offsetsWithTrue(){for(const t of this._mask.offsetsWithTrue()){const e=t.x+this.westX,r=t.y+this.northY;yield{x:e,y:r}}}}},971:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;const n=r(154);e.Mask=class{constructor(t,e=!1){this._size=new n.Size,void 0!==t&&this._size.copyFrom(t),this._bits=new Array(Math.ceil(this._size.area/32)).fill(e?4294967295:0)}toString(){let t="";for(let e=0;e<this.height;e++){for(let r=0;r<this.width;r++)t+=this.get(r,e)?"☑":"☐";t+="\n"}return t}equals(t){return this._size.equals(t._size)&&this._bits.length===t._bits.length&&this._bits.every(((e,r)=>e===t._bits[r]))}get width(){return this._size.width}get height(){return this._size.height}get(t,e){return this.getAtIndex(this.index(t,e))}getAtOffset(t){return this.get(t.x,t.y)}getAtIndex(t){const e=t>>>5,r=1<<(31&t);return 0!=(this._bits[e]&r)}copyFrom(t){return this._size.copyFrom(t._size),this._bits=t._bits.slice(),this}set(t,e,r){return this.setAtIndex(this.index(t,e),r)}setAtOffset(t,e){return this.set(t.x,t.y,e)}setAtIndex(t,e){const r=t>>>5,n=1<<(31&t);return e?this._bits[r]|=n:this._bits[r]&=~n,this}index(t,e){return this._size.index(t,e)}*locations(){let t=0,e=1;for(const{x:r,y:n}of this._size.offsets()){const i=0!=(this._bits[t]&e);yield{x:r,y:n,value:i},e===1<<31?(e=1,t++):e<<=1}}*offsetsWithTrue(){for(const{x:t,y:e,value:r}of this.locations())r&&(yield{x:t,y:e})}}},317:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Offset=void 0;const n=r(74),i=[0,1,1,1,0,-1,-1,-1],s=[-1,-1,0,1,1,1,0,-1],a=[0,1,0,-1],o=[-1,0,1,0];e.Offset=class{constructor(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}toString(){return`(${this.x},${this.y})`}equals(t){return this.x===t.x&&this.y===t.y}set(t,e){return this.x=t,this.y=e,this}copyFrom(t){return this.set(t.x,t.y)}setFromDirection(t){return this.set(i[t],s[t])}setFromCardinalDirection(t){return this.set(a[t],o[t])}add(t,e){return this.x+=t,this.y+=e,this}addSize(t){return this.add(t.width,t.height)}addOffset(t){return this.add(t.x,t.y)}addDirection(t){return this.add(i[t],s[t])}addCardinalDirection(t){return this.add(a[t],o[t])}subtractOffset(t){return this.add(-t.x,-t.y)}multiply(t){return this.x*=t,this.y*=t,this}rotate(t,e){if(e)return this.subtractOffset(e).rotate(t).addOffset(e);{const e=n.cardinalDirectionFromNorthTurn(t),{x:r,y:i}=this,s=a[e],u=o[e],c=-i*s-r*u,h=r*s-i*u;return this.set(c,h)}}distanceChebyshev(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))}distanceManhattan(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}*nearbyChebyshevOffsets(t,e){if(e>=0)for(let r=-e;r<=e;r++)for(let n=-e;n<=e;n++)yield t.set(this.x+n,this.y+r)}}},64:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RasterMask=void 0;const n=r(82);e.RasterMask=class{constructor(t,e){if(this._rect=new n.Rectangle,e.length!==t.height)throw new Error(`bad lines array length ${e.length} for bounds ${t}`);this._rect.copyFrom(t),this._lines=e}toString(){let t="";const{eastX:e}=this._rect;for(let r=0;r<this.height;r++){const n=this._lines[r];let i=this.westX;for(let e=0;e<n.length;e+=2){const r=n[e],s=n[e+1];for(;i<r;)t+="∙",i++;for(;i<s;)t+="█",i++}for(;i<=e;)t+="∙",i++;t+="\n"}return`(${this._rect.westX},${this._rect.northY})\n${t}`}equals(t){return this._rect.equals(t._rect)&&this._lines.length===t._lines.length&&this._lines.every(((e,r)=>e.length===t._lines[r].length&&e.every(((e,n)=>e===t._lines[r][n]))))}get northY(){return this._rect.northY}get southY(){return this._rect.southY}get westX(){return this._rect.westX}get width(){return this._rect.width}get height(){return this._rect.height}get(t,e){if(e<this.northY||e>this._rect.southY)return!1;const r=this._lines[e-this.northY];for(let e=0;e<r.length;e+=2)if(t>=r[e]&&t<r[e+1])return!0;return!1}getAtOffset(t){return this.get(t.x,t.y)}*bandsAt(t){if(t>=this.northY&&t<=this._rect.southY){const e=this._lines[t-this.northY];for(let t=0;t<e.length;t+=2)yield{westX:e[t],eastX:e[t+1]-1}}}}},82:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;const n=r(154),i=r(317),s=[0,0,1,1],a=[0,1,1,0];e.Rectangle=class{constructor(t,e,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===s&&(s=0),this.northWest=new i.Offset(t,e),this.size=new n.Size(r,s)}toString(){return`(${this.westX},${this.northY} ${this.width}x${this.height})`}equals(t){return this.westX===t.westX&&this.northY===t.northY&&this.size.equals(t)}get northY(){return this.northWest.y}get southY(){return this.northWest.y+this.size.height-1}get westX(){return this.northWest.x}get eastX(){return this.northWest.x+this.size.width-1}get width(){return this.size.width}get height(){return this.size.height}get empty(){return this.size.empty}get area(){return this.size.area}set(t,e,r,n){return this.northWest.set(t,e),this.size.set(r,n),this}setFromCorners(t,e){const r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),s=Math.max(t.y,e.y);return this.set(r,i,n-r+1,s-i+1)}copyFrom(t){return this.set(t.westX,t.northY,t.width,t.height)}addOffset(t){return this.northWest.addOffset(t),this}scale(t){return this.northWest.multiply(t),this.size.multiply(t),this}rotate(t,e){const r=s[t],n=a[t];return this.northWest.add(r*(this.width-1),n*(this.height-1)).rotate(t,e),this.size.rotate(t),this}extendToInclude(t){const e=t.x-this.westX;e<0?(this.size.width-=e,this.northWest.x=t.x):e>=this.size.width&&(this.size.width=e+1);const r=t.y-this.northWest.y;return r<0?(this.size.height-=r,this.northWest.y=t.y):r>=this.size.height&&(this.size.height=r+1),this}contains(t,e){return this.size.contains(t-this.westX,e-this.northY)}index(t,e){return this.size.index(t-this.westX,e-this.northY)}containsOffset(t){return this.contains(t.x,t.y)}containsRectangle(t){if(0===t.width&&0===t.height)return!1;const e=t.westX-this.westX,r=t.northY-this.northY;return!!this.size.contains(e,r)&&this.size.contains(e+t.width-1,r+t.height-1)}overlapsRectangle(t){return this.northY<=t.northY+t.height-1&&this.southY>=t.northY&&this.westX<=t.westX+t.width-1&&this.eastX>=t.westX&&!this.empty&&0!==t.width&&0!==t.height}*offsets(){const{eastX:t,southY:e}=this;for(let r=this.northY;r<=e;r++)for(let e=this.westX;e<=t;e++)yield{x:e,y:r}}anyOf(t){for(const{x:e,y:r}of this.offsets())if(t(e,r))return!0;return!1}}},154:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Size=void 0;const n=r(74);e.Size=class{constructor(t,e){if(void 0===t&&(t=0),void 0===e&&(e=0),t<0||e<0)throw new Error(`bad size (${t}x${e})`);this.width=t,this.height=e}toString(){return`(${this.width}x${this.height})`}equals(t){return this.width===t.width&&this.height===t.height}get empty(){return 0===this.width||0===this.height}get area(){return this.width*this.height}set(t,e){if(t<0||e<0)throw new Error(`bad size (${t}x${e})`);return this.width=t,this.height=e,this}copyFrom(t){return this.set(t.width,t.height)}add(t,e){return this.width+=t,this.height+=e,this}multiply(t){return this.width*=t,this.height*=t,this}rotate(t){return n.axisFromNorthSouthTurn(t)===n.Axis.WEST_EAST&&this.set(this.height,this.width),this}contains(t,e){return t>=0&&e>=0&&t<this.width&&e<this.height}containsOffset(t){return this.contains(t.x,t.y)}index(t,e){return e*this.width+t}*offsets(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)yield{x:e,y:t}}anyOf(t){for(const{x:e,y:r}of this.offsets())if(t(e,r))return!0;return!1}}},457:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformRectangle=void 0;const n=r(82),i=r(74),s=r(317),a=r(154),o=new s.Offset,u=new s.Offset,c=new a.Size;e.TransformRectangle=class{constructor(t,e){this._size=new a.Size,this._flip=i.Flip.HEADS,this._rotate=i.CardinalTurn.NONE,this._translate=new s.Offset,this._matrix=[1,0,0,0,1,0],this._targetRect=new n.Rectangle,void 0===t||("number"==typeof t?this._size.set(t,e):this._size.copyFrom(t)),this._update()}toString(){return`[${this._size} -> ${i.flipToString(this._flip)} ${i.cardinalTurnToString(this._rotate)} ${this._translate} -> ${this._targetRect}]`}equals(t){return this._size.equals(t._size)&&this._flip===t._flip&&this._rotate===t._rotate&&this._translate.equals(t._translate)}get flip(){return this._flip}get rotate(){return this._rotate}get northY(){return this._translate.y}get southY(){return this._translate.y+this._targetRect.height-1}get westX(){return this._translate.x}get eastX(){return this._translate.x+this._targetRect.width-1}get width(){return this._targetRect.width}get height(){return this._targetRect.height}_update(){o.setFromCardinalDirection(i.cardinalDirectionFromNorthTurn(this._rotate));const t=this._flip===i.Flip.TAILS?-1:1;switch(this._matrix[0]=-o.y*t,this._matrix[1]=-o.x,this._matrix[2]=this._translate.x,this._matrix[3]=o.x*t,this._matrix[4]=-o.y,this._matrix[5]=this._translate.y,this._rotate){case i.CardinalTurn.NONE:this._flip===i.Flip.TAILS&&(this._matrix[2]+=this._size.width-1);break;case i.CardinalTurn.RIGHT:this._matrix[2]+=this._size.height-1,this._flip===i.Flip.TAILS&&(this._matrix[5]+=this._size.width-1);break;case i.CardinalTurn.AROUND:this._matrix[5]+=this._size.height-1,this._flip===i.Flip.HEADS&&(this._matrix[2]+=this._size.width-1);break;case i.CardinalTurn.LEFT:this._flip===i.Flip.HEADS&&(this._matrix[5]+=this._size.width-1)}return c.copyFrom(this._size).rotate(this._rotate),this._targetRect.set(this._translate.x,this._translate.y,c.width,c.height),this}copyFrom(t){return this._size.copyFrom(t._size),this._flip=t._flip,this._rotate=t._rotate,this._translate.copyFrom(t._translate),t._matrix.forEach(((t,e)=>this._matrix[e]=t)),this._targetRect.copyFrom(t._targetRect),this}reset(){return this._flip=i.Flip.HEADS,this._rotate=i.CardinalTurn.NONE,this._translate.set(0,0),this._update()}invert(){const t=i.cardinalTurnFromCardinalDirections(i.CardinalDirection.NORTH,i.cardinalDirectionFromCardinalOrientation(i.cardinalOrientationReverse(i.cardinalOrientationFromFlipAndCardinalDirection(this._flip,i.cardinalDirectionFromNorthTurn(this._rotate)))));return this._rotate=t,this._size.rotate(t),this._translate.multiply(-1),this._update()}setTransform(t,e,r){return this._flip=t,this._rotate=e,this._translate.copyFrom(r),this._update()}setFlip(t){return this._flip=t,this._update()}setRotate(t){return this._rotate=t,this._update()}setTranslate(t,e){return this._translate.set(t,e),this._update()}setTranslateOffset(t){return this._translate.copyFrom(t),this._update()}applyToCardinalOrientation(t){return this._flip===i.Flip.TAILS&&(t=i.cardinalOrientationFlip(t,i.Axis.NORTH_SOUTH)),i.cardinalOrientationAddCardinalTurn(t,this._rotate)}unapplyFromCardinalOrientation(t){return t=i.cardinalOrientationAddCardinalTurn(t,i.cardinalTurnReverse(this._rotate)),this._flip===i.Flip.TAILS&&(t=i.cardinalOrientationFlip(t,i.Axis.NORTH_SOUTH)),t}applyToCardinalDirection(t){return i.cardinalDirectionFromCardinalOrientation(this.applyToCardinalOrientation(i.cardinalOrientationFromFlipAndCardinalDirection(i.Flip.HEADS,t)))}unapplyFromCardinalDirection(t){return i.cardinalDirectionFromCardinalOrientation(this.unapplyFromCardinalOrientation(i.cardinalOrientationFromFlipAndCardinalDirection(i.Flip.HEADS,t)))}applyTo(t,e,r){const n=e*this._matrix[0]+r*this._matrix[1]+this._matrix[2],i=e*this._matrix[3]+r*this._matrix[4]+this._matrix[5];return t.set(n,i)}unapplyFrom(t,e,r){const n=e-this._matrix[2],i=r-this._matrix[5],s=n*this._matrix[0]+i*this._matrix[3],a=n*this._matrix[1]+i*this._matrix[4];return t.set(s,a)}applyToOffset(t,e){return void 0===e&&(e=t),this.applyTo(t,e.x,e.y)}unapplyFromOffset(t,e){return void 0===e&&(e=t),this.unapplyFrom(t,e.x,e.y)}applyToRectangle(t,e){return void 0!==e&&t.copyFrom(e),o.set(t.westX,t.northY),u.set(t.eastX,t.southY),this.applyToOffset(o),this.applyToOffset(u),t.setFromCorners(o,u)}unapplyFromRectangle(t,e){return void 0!==e&&t.copyFrom(e),o.set(t.westX,t.northY),u.set(t.eastX,t.southY),this.unapplyFromOffset(o),this.unapplyFromOffset(u),t.setFromCorners(o,u)}}},175:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(74),e),i(r(876),e)},725:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=s(r(254)),u=s(r(995)),c=document.getElementById("canvas");c.width=Math.min(c.width,window.innerWidth-100);var h=document.getElementById("demoinner");h.style.width=c.width+"px";var l=c.width,d=c.height,f=c.getContext("2d"),_=document.getElementById("iterations"),p=document.getElementById("variation"),g=document.getElementById("seed"),m=document.getElementById("newseed");function T(t,e,r,n){var i=t.value,s=parseInt(i,10);return Number.isFinite(s)?Math.max(e,Math.min(r,s)):n}var y,O,x,v=7,S=60,w=1;function A(){var t=T(_,0,11,7),e=g.value,r=T(p,0,100,60);if(!x||v!==t||y!==e||S!==r){v=t,y=e,S=r;var n=o.makeBlockFractal({random:u.alea(y),iterations:v,variation:S/100});x=n.rasterize(),w=Math.pow(2,7-v),document.getElementById("label").innerText=y,document.title="BlockFractal - "+y;var i="#"+encodeURIComponent(y);60!==S&&(i+="/v="+S),O!==y?(window.location.hash=i,O=y):window.location.replace(i)}}var D=1,E=0,C=0,b=1,F=0,R=0;function N(){D=.5,b=1,E=F=0,C=R=0}var H=f.getImageData(0,0,l,d),I=["North","East","South","West","Upper","Lower","Middle","Far","Near","Great","High","Low","Ancient","True","Superior","Greater","Lesser","Distant","Old","Ye Olde","New","Lost","Forgotten"],M=["B","C","D","F","G","H","J","K","L","M","N","P","Q","R","S","T","V","W","X","Y","Z","Br","Bl","By","Cr","Cl","Ch","Dr","Fr","Fl","Gr","Gl","Gh","G'","Kr","Kl","Kh","Pr","Pl","Ph","Py","Q'","St","Scr","Sch","Sh","Sm","Sn","Sp","Spr","Sv","Sw","Th","Thr","T'","Tw","Vr","Wr"],z=["A","E","I","O","U","A","E","I","O","U","A","E","I","O","U","Ae","Aeo","Ai","Ao","Au","Ea","Ee","Ei","Eo","Ia","Ie","Io","Iou","Iu","Oa","Oe","Oi","Oo","Ou","Uio"],k=["shire","land","tis","fell","ness","sia","ria","delle","landia","dom","vania","ville","ton","berg","ham","pico","stead","dero","lato"],W=["ica","inor","eros","ilia","istan","edonia","uguay","onia","arnia","ing","onne","ine","ovo","ovka","ique"];function j(){var t="";Math.random()<.5&&(t&&(t+=" "),t+=I[Math.floor(Math.random()*I.length)]),t&&(t+=" ");var e=Math.floor(3*Math.random()+1);Math.random()<.15&&e++;for(var r=Math.random()<.7,n=0;n<e;n++){var i=void 0;i=r?M[Math.floor(Math.random()*M.length)]:z[Math.floor(Math.random()*z.length)],n>0&&(i=i.toLowerCase()),t+=i,r=!r}t+=r?k[Math.floor(Math.random()*k.length)]:W[Math.floor(Math.random()*W.length)],g.value=t,A(),N()}function L(){var t,e,r=location.hash;if(r.length>1){var n=r.indexOf("/"),i=decodeURIComponent(r.substr(1,n<0?r.length:n-1)),s=60,o=7;if(n>=0)try{for(var u=a(r.substr(n+1).split("/")),c=u.next();!c.done;c=u.next()){var h=c.value;h.startsWith("v=")?(s=parseInt(h.substr(2)),(isNaN(s)||s<0||s>100)&&(s=60)):h.startsWith("i=")&&(o=parseInt(h.substr(2)),(isNaN(o)||o<0||o>11)&&(o=7))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}i!==y&&(O=i,g.value=i,p.value=String(s),_.value=String(o),A())}}location.hash.length>1?L():j(),_.onchange=A,_.oninput=A,p.onchange=A,p.oninput=A,g.onchange=A,g.oninput=A,m.onclick=j,window.onhashchange=L;var P=45,X=1.15;document.getElementById("zoomin").onclick=function(){b*=X},document.getElementById("zoomout").onclick=function(){b/=X};var Y,U,B=!1,q=!1;h.onmouseleave=function(){q=!1},h.onmousedown=function(t){B=!0,Y=F+t.clientX/D,U=R+t.clientY/D},h.onmousemove=function(t){!0===B&&(E=F=Y-t.clientX/D,C=R=U-t.clientY/D),q=!0},document.onmouseup=function(){B=!1},h.onwheel=function(t){if(q){var e=E+(t.offsetX-(l>>>1))/D,r=C+(t.offsetY-(d>>>1))/D;b*=Math.pow(X,-t.deltaY/120),F=e-(t.offsetX-(l>>>1))/b,R=r-(t.offsetY-(d>>>1))/b,t.preventDefault()}},document.onkeypress=function(t){if(document.getElementById("seed")!==document.activeElement)switch(t.code){case"Digit0":case"Numpad5":N();break;case"Numpad8":R-=P/D;break;case"Numpad2":R+=P/D;break;case"Numpad4":F-=P/D;break;case"Numpad6":F+=P/D;break;case"Equal":case"NumpadAdd":b*=X;break;case"Minus":case"NumpadSubtract":b/=X}},document.onkeydown=function(t){if(document.getElementById("seed")!==document.activeElement&&q)switch(t.code){case"ArrowUp":R-=P/D,t.preventDefault();break;case"ArrowDown":R+=P/D,t.preventDefault();break;case"ArrowLeft":F-=P/D,t.preventDefault();break;case"ArrowRight":F+=P/D,t.preventDefault()}},requestAnimationFrame((function t(){D=(4*D+b)/5,E=(4*E+F)/5,C=(4*C+R)/5,function(){if(!document.hidden&&void 0!==x){for(var t=H.data,e=d>>>1,r=l>>>1,n=0,i=0;i<d;i++)for(var s=Math.floor(C/w+(i-e)/D/w),a=0;a<l;a++){var o=Math.floor(E/w+(a-r)/D/w);x.get(o,s)?(t[n++]=64,t[n++]=251,t[n++]=6,t[n++]=255):(t[n++]=21,t[n++]=87,t[n++]=134,t[n++]=255)}f.putImageData(H,0,0)}}(),requestAnimationFrame(t)})),document.addEventListener("visibilitychange",(function(){document.hidden?x=void 0:A()}))},906:()=>{}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r(725)})();
//# sourceMappingURL=demo.js.map